---
import { getCollection } from 'astro:content';
import BlogListPage from '../../components/blog/BlogListPage.astro';
import { getLangFromUrl } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const activeLang = lang === 'he' ? 'he' : 'en';

const blogPosts = (await getCollection('blog'))
  .filter((post) => !post.data.hidden)
  .sort(
    (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime(),
  );
---

<BlogListPage lang={activeLang} blogPosts={blogPosts} />
