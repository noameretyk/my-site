---
import { getCollection } from 'astro:content';
import BlogListPage from '../../../components/blog/BlogListPage.astro';

export function getStaticPaths() {
  return [
    { params: { lang: 'he' } },
  ];
}

const { lang } = Astro.params;

if (lang !== 'he') {
  throw new Error('Unsupported locale');
}

const blogPosts = (await getCollection('blog'))
  .filter((post) => !post.data.hidden)
  .sort(
    (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime(),
  );
---

<BlogListPage lang="he" blogPosts={blogPosts} />
